<!DOCTYPE html>
<html lang="pt-br">
<head>

  <meta charset="utf-8" />

  
  <title>Montando CRUD com Vue 2</title>

  
  


<meta name="google-site-verification" content="VDefNJwj4-IOy5G6HPnTYDi4VzjF9O-d6f-4j93CvIs" />




  
  <meta name="author" content="lhas" />
  <meta name="description" content="Após um hiato de 18 dias, estou dando continuidade a nossa série de posts sobre o Vue 2.
Caso você queira acompanhar os posts anteriores:
 Iniciando um projeto com Vue 2 Autenticação com JWT e Vue 2  Pré-Requisitos  Vue Vue-resource Vue-router (opcional, mas útil caso você queira páginas separadas para cada ação)  Nosso projeto Atualmente, o projeto encontra-se assim:
Vamos começar pelo Index (Listagem de Registros)." />

  
  
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@01lhas" />
    <meta name="twitter:title" content="Montando CRUD com Vue 2" />
    <meta name="twitter:description" content="Após um hiato de 18 dias, estou dando continuidade a nossa série de posts sobre o Vue 2.
Caso você queira acompanhar os posts anteriores:
 Iniciando um projeto com Vue 2 Autenticação com JWT e Vue 2  Pré-Requisitos  Vue Vue-resource Vue-router (opcional, mas útil caso você queira páginas separadas para cada ação)  Nosso projeto Atualmente, o projeto encontra-se assim:
Vamos começar pelo Index (Listagem de Registros)." />
    <meta name="twitter:image" content="http://0e1dev.com/covers/montando-crud-com-vue-2.png" />
    <meta name="og:title" content="Montando CRUD com Vue 2" />
    <meta name="og:description" content="Após um hiato de 18 dias, estou dando continuidade a nossa série de posts sobre o Vue 2.
Caso você queira acompanhar os posts anteriores:
 Iniciando um projeto com Vue 2 Autenticação com JWT e Vue 2  Pré-Requisitos  Vue Vue-resource Vue-router (opcional, mas útil caso você queira páginas separadas para cada ação)  Nosso projeto Atualmente, o projeto encontra-se assim:
Vamos começar pelo Index (Listagem de Registros)." />
    <meta name="og:image" content="http://0e1dev.com/covers/montando-crud-com-vue-2.png" />
  




<meta name="generator" content="Hugo 0.30.2" />


<link rel="canonical" href="http://0e1dev.com/post/montando-crud-com-vue-2/" />
<link rel="alternative" href="/index.xml" title="0e1dev" type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />







<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="0e1dev" />
<meta name="msapplication-tooltip" content="0e1dev" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="/img/touch-icon-apple.png" />
<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.1/video-js.min.css" />

<link rel="stylesheet" href="/css/bundle.css" />


  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.1/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/2014.01.31/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.0/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
        <a title="Go to comments" class="to-comment" href="#disqus_thread"><span class="icon icon-comment"></span></a>
        
      
    </div>
    
    
  <header class="site-header">
  <a href="/">
    <img src="/img/marca-branca.png" alt="0e1dev">
  </a>
  <p class="subtitle"></p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item "><a href="/sobre/">Sobre</a></li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      

      

      <li class="social-item">
        <a href="//twitter.com/01lhas" title="Twitter"><span class="icon icon-twitter"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">

    <header class="post-header">
      <h1 class="post-title">Montando CRUD com Vue 2</h1>
      <p class="post-meta">@lhas · 07/01/2017 · 10 mins. de leitura</p>
    </header>

    
    <div title="Montando CRUD com Vue 2" style="width: 100%; height: 250px; background: url(/covers/montando-crud-com-vue-2.png); background-size: contain;
    background-position: center; background-repeat: no-repeat;"></div>
  
    <article class="post-content">

<p>Após um hiato de 18 dias, estou dando continuidade a nossa série de posts sobre o <a href="https://vuejs.org/">Vue 2</a>.</p>

<p>Caso você queira acompanhar os posts anteriores:</p>

<ul>
<li><a href="http://blog.0e1dev.com/2016/12/11/Iniciando-um-projeto-com-Vue-2/">Iniciando um projeto com Vue 2</a></li>
<li><a href="http://blog.0e1dev.com/2016/12/11/Autenticacao-com-JWT-e-Vue-2/">Autenticação com JWT e Vue 2</a></li>
</ul>

<h1 id="pré-requisitos">Pré-Requisitos</h1>

<ul>
<li><a href="https://vuejs.org/">Vue</a></li>
<li><a href="https://github.com/pagekit/vue-resource">Vue-resource</a></li>
<li><a href="https://router.vuejs.org/en/">Vue-router</a> (opcional, mas útil caso você queira páginas separadas para cada ação)</li>
</ul>

<h1 id="nosso-projeto">Nosso projeto</h1>

<p>Atualmente, o projeto encontra-se assim:</p>

<p><img src="1.png" alt="" /></p>

<p>Vamos começar pelo <em>Index</em> (Listagem de Registros).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">template</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dashboard-inputs&#34;</span><span style="color:#f92672">&gt;</span>
  <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt; &lt;!-- .dashboard-inputs --&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/template&gt;</span>

<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;DashboardInputsIndex&#39;</span>
}
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span></code></pre></div>
<h1 id="index">Index</h1>

<p>Primeiro, precisamos recuperar os nossos registros através de uma requisição XHR.</p>

<p>Conseguimos fazer requisições facilmente com o <strong>vue-resource</strong>.</p>

<p>Um exemplo para esta nossa requisição:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$http</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;http://localhost:3000/lessons.json&#39;</span>).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">response</span>) =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Dados aqui:&#39;</span>)
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">data</span>)
})</code></pre></div>
<p>Para quem está acostumado com o Angular 1, a sintaxe é bem semelhante.</p>

<p>Este é um exemplo simples de requisição GET com o <em>vue-resource</em>.</p>

<p>Porém, vamos trabalhar com outra funcionalidade deste componente, para agilizar nosso processo de desenvolver um CRUD.</p>

<p>Para isto, vamos usar o método <code>this.$resource</code>.</p>

<h1 id="usando-resource">Usando $resource</h1>

<p>Um exemplo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">lessons</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$resource</span>(<span style="color:#e6db74">&#39;http://localhost:3000/lessons{/id}.json&#39;</span>)

<span style="color:#a6e22e">lessons</span>.<span style="color:#a6e22e">get</span>({}).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">response</span>) =&gt; {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">response</span>)
})</code></pre></div>
<p><strong>Observação:</strong> <code>{/id}</code> significa que podemos passar um parâmetro ID, mas este parâmetro é opcional, por isto está entre chaves {}.</p>

<h1 id="aplicando-resource-na-index">Aplicando $resource na Index</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;DashboardInputsIndex&#39;</span>,
  <span style="color:#a6e22e">data</span> () {
    <span style="color:#66d9ef">return</span> {
      <span style="color:#a6e22e">resource</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$resource</span>(<span style="color:#e6db74">&#39;http://localhost:3000/lessons{/id}.json&#39;</span>),
      <span style="color:#a6e22e">lessons</span><span style="color:#f92672">:</span> []
    }
  },
  <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">initialize</span> () {
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">get</span>({}).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">response</span>) =&gt; {
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lessons</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">data</span>
      })
    }
  },
  <span style="color:#a6e22e">created</span> () {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">initialize</span>()
  }
}</code></pre></div>
<p>Vamos pontuar cada atributo do componente.</p>

<h2 id="name">name</h2>

<p>É o nome do nosso componente.</p>

<h2 id="data">data</h2>

<p>Este atributo é nossa camada de dados do componente. Caso você queira manipular dados dinâmicos, eles precisam ser inicializados aqui.</p>

<p>No nosso caso, inicializamos 2 variáveis:</p>

<p><strong>resource</strong>: Irá armazenar nosso objeto <code>$resource</code>
<strong>lessons</strong>: Irá armazenar nossas futuras aulas.</p>

<p>Todas as variáveis atribuídas ao data estarão disponíveis no resto do componente dentro do <code>this</code>.</p>

<p>No nosso caso, podemos usar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">resource</span>; <span style="color:#75715e">// para nosso $resource
</span><span style="color:#75715e"></span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">lessons</span>; <span style="color:#960050;background-color:#1e0010">// para nossas aulas</span></code></pre></div>
<h2 id="methods">methods</h2>

<p>Esta é fácil. São os métodos que estarão disponíveis no nosso componente.</p>

<p>Toda e qualquer função que você queira usar, deverá ser incluída aqui.</p>

<p>No nosso caso, criamos uma chamada <code>initialize</code>, que será usada quando o nosso componente for construído/inicializado.</p>

<p>Nosso método <code>initialize</code> usa o <code>$resource</code> para efetuar a requisição XHR e atualiza os nossos dados.</p>

<h2 id="created">created</h2>

<p>Este é um callback que o Vue disponibiliza. A função que for atribuída a este callback será rodada toda vez que nosso componente for chamado.</p>

<p>No nosso caso, aproveitamos este callback para chamar o nosso método <code>this.initialize()</code>.</p>

<p>Sendo assim, toda vez que nosso componente <em>Index</em> for carregado, ele fará a requisição XHR.</p>

<p><strong>Lindo, não?!</strong></p>

<p><img src="https://media.giphy.com/media/3o6ZtjrcQ4Cs3oYkik/giphy.gif" alt="" /></p>

<h1 id="exibindo-dados-na-view">Exibindo dados na view</h1>

<p>Explicado os atributos do componente, vamos exibir as informações retornadas pela requisição na nossa view.</p>

<p>A view ficará assim:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dashboard-inputs&#34;</span>&gt;

    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;

      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row&#34;</span>&gt;

        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col s12&#34;</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lesson in lessons&#34;</span>&gt;
          &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card center&#34;</span>&gt;
            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content&#34;</span>&gt;
              &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-title&#34;</span>&gt;{{lesson.class_date}}&lt;/<span style="color:#f92672">span</span>&gt;
              &lt;<span style="color:#f92672">p</span>&gt;{{lesson.observation}}&lt;/<span style="color:#f92672">p</span>&gt;
            &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .card-content --&gt;</span>
          &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .card --&gt;</span>
        &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .col --&gt;</span>

      &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .row --&gt;</span>
    &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .container --&gt;</span>

  &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .dashboard-inputs --&gt;</span>
&lt;/<span style="color:#f92672">template</span>&gt;</code></pre></div>
<p><img src="2.png" alt="" /></p>

<p>Nossa <em>Index</em> está finalizada por agora.</p>

<p>Vamos para a próxima etapa&hellip;</p>

<h1 id="create">Create</h1>

<p>Precisamos permitir que nossos usuários criem novos registros, certo? Certo.</p>

<p>Para isto, vamos usar outro componente. Vamos chamá-lo de <code>Create.vue</code>.</p>

<p>Por enquanto, ele só vai ter um botão de adicionar que em breve acionará uma modal.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;inputs-create&#34;</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fixed-action-btn&#34;</span>&gt;
      &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn-floating btn-large z-depth-4 green&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons&#34;</span>&gt;add&lt;/<span style="color:#f92672">i</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
    &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .fixed-action-btn --&gt;</span>
  &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .inputs-create --&gt;</span>
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Inputs-Create&#39;</span>
}
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>
<p><strong>Observação:</strong> Está é a minha árvore atual, caso você esteja curioso sobre.</p>

<p><img src="3.png" alt="" /></p>

<h2 id="importando-o-create-no-index">Importando o Create no Index</h2>

<p>Graças ao Vue, podemos utilizar componentes dentro de outros componentes.</p>

<p>Isto permite uma herança de pai x filho muito interessante.</p>

<p>Através desta herança, os filhos podem herdar <strong>props</strong> (propriedades) e emitir <strong>eventos</strong> para os pais.</p>

<p><img src="https://vuejs.org/images/props-events.png" alt="" /></p>

<p>Como a documentação do Vue sugere: <code>Props down, events up</code>.</p>

<p>Para os mais novatos, é aqui que o bicho pega conforme sua aplicação cresce. O nome que se dá para este &ldquo;compartilhamento de dados&rdquo; é gerenciamento de estados (ou <strong>State Management</strong>). Uma má implementação aqui e sua aplicação pode tornar-se lixo facilmente no futuro.</p>

<p>Apenas imagine uma grande aplicação em que diversos componentes se comuniquem sem necessariamente conter uma herança.</p>

<p>Para quem já ouviu falar, costumamos resolver este problema com uma pattern chamada <a href="https://github.com/facebook/flux/tree/master/examples/flux-concepts">Flux</a>.</p>

<p>O vue contém sua própria implementação desta pattern chamada <a href="https://vuex.vuejs.org/en/intro.html">vuex</a>. No próximo post falo mais sobre este assunto.</p>

<p>Voltando ao nosso título, vamos importar o create no index. No nosso <code>Index.vue</code>, precisaremos fazer esta importação:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">InputsCreate</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./Create&#39;</span></code></pre></div>
<p>Agora precisamos indicar ao nosso Index para consumir este componente:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#75715e">// ocultei o código para uma melhor leitura
</span><span style="color:#75715e"></span>  ...,
  <span style="color:#a6e22e">components</span><span style="color:#f92672">:</span> {
    <span style="color:#e6db74">&#39;Inputs-Create&#39;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">InputsCreate</span>
  }
}</code></pre></div>
<p>Agora podemos usar dentro do nosso Componente pai o nosso filho quantas vezes quisermos, da seguinte maneira:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">Inputs-Create</span>&gt;&lt;/<span style="color:#f92672">Input-Create</span>&gt;</code></pre></div>
<p>No meu caso eu usei assim:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dashboard-inputs&#34;</span>&gt;

    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;

      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row&#34;</span>&gt;

        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col s12&#34;</span> <span style="color:#a6e22e">v-for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lesson in lessons&#34;</span>&gt;
          &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card center z-depth-1&#34;</span>&gt;
            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content&#34;</span>&gt;
              &lt;<span style="color:#f92672">span</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-title&#34;</span>&gt;{{lesson.class_date}}&lt;/<span style="color:#f92672">span</span>&gt;
              &lt;<span style="color:#f92672">p</span>&gt;{{lesson.observation}}&lt;/<span style="color:#f92672">p</span>&gt;
            &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .card-content --&gt;</span>
          &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .card --&gt;</span>
        &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .col --&gt;</span>

      &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .row --&gt;</span>
    &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .container --&gt;</span>

    <span style="color:#75715e">&lt;!-- Aqui a mágica acontece --&gt;</span>
    &lt;<span style="color:#f92672">Inputs-Create</span>&gt;&lt;/<span style="color:#f92672">Inputs-Create</span>&gt;

  &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .dashboard-inputs --&gt;</span>
&lt;/<span style="color:#f92672">template</span>&gt;</code></pre></div>
<p>O que me proporcionou a seguinte renderização:</p>

<p><img src="4.png" alt="" /></p>

<p>Agora que temos o <strong>Create</strong> bem isolado do <strong>Index</strong>, vamos fazer a modal funcionar.</p>

<p>Nesta situação, você pode resolver da maneira que lhe achar mais conveniente.</p>

<p>Neste exemplo em específico, eu utilizarei o <a href="http://jquery.com/">jQuery</a> com o <a href="http://materializecss.com/">Materialize</a>, mas eu não recomendo a ninguém usar jQuery dentro do Vue. Tente usar plugins mais agnósticos de tecnologias possíveis.</p>

<p>Eu só estou fazendo as coisas desta forma pois neste projeto quero usar o Materialize e nenhuma implementação do mesmo com o Vue me agradou, então tentei deixar as coisas mais <em>roots</em> possíveis.</p>

<p>Meu template com o modal funcionando abaixo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;inputs-create&#34;</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fixed-action-btn&#34;</span>&gt;
      &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#modal1&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn-floating btn-large z-depth-4 green&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons&#34;</span>&gt;add&lt;/<span style="color:#f92672">i</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
    &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .fixed-action-btn --&gt;</span>

    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal1&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal&#34;</span>&gt;
      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-content&#34;</span>&gt;
        &lt;<span style="color:#f92672">h4</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;center&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons&#34;</span>&gt;edit&lt;/<span style="color:#f92672">i</span>&gt; Adicionar Aula&lt;/<span style="color:#f92672">h4</span>&gt;

        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-field&#34;</span>&gt;
          &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lesson.class_date&#34;</span>&gt;
          &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span>&gt;Data&lt;/<span style="color:#f92672">label</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .input-field --&gt;</span>

        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-field&#34;</span>&gt;
          &lt;<span style="color:#f92672">textarea</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;observation&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;materialize-textarea&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lesson.observation&#34;</span>&gt;&lt;/<span style="color:#f92672">textarea</span>&gt;
          &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email&#34;</span>&gt;Observações&lt;/<span style="color:#f92672">label</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .input-field --&gt;</span>
      &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .modal-content --&gt;</span>

      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-footer&#34;</span>&gt;
        &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#!&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-action modal-close btn blue&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons right&#34;</span>&gt;send&lt;/<span style="color:#f92672">i</span>&gt; Salvar Aula&lt;/<span style="color:#f92672">a</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .modal-footer --&gt;</span>
    &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .modal --&gt;</span>

  &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .inputs-create --&gt;</span>
&lt;/<span style="color:#f92672">template</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Inputs-Create&#39;</span>,
  <span style="color:#a6e22e">data</span> () {
    <span style="color:#66d9ef">return</span> {
      <span style="color:#a6e22e">lesson</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">class_date</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
        <span style="color:#a6e22e">observation</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>
      }
    }
  },
  <span style="color:#a6e22e">created</span> () {
    window.<span style="color:#a6e22e">jQuery</span>(document).<span style="color:#a6e22e">ready</span>(() =&gt; {
      window.<span style="color:#a6e22e">jQuery</span>(<span style="color:#e6db74">&#39;.modal&#39;</span>).<span style="color:#a6e22e">modal</span>()
    })
  }
}
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>
<p><img src="5.png" alt="" /></p>

<p>Agora precisamos fazer este formulário funcionar.</p>

<h2 id="fazendo-o-formulário-funcionar">Fazendo o formulário funcionar</h2>

<p><img src="https://media.giphy.com/media/jTHt4MgxlbO5G/giphy.gif" alt="" /></p>

<p>Primeiro, precisamos indicar ao nosso botão de <strong>Salvar</strong> que ele deve chamar um método através do evento de <strong>clique</strong>.</p>

<p>Para isto, vamos mudar a sintaxe do botão:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- Antes --&gt;</span>
&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#!&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-action modal-close btn blue&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons right&#34;</span>&gt;send&lt;/<span style="color:#f92672">i</span>&gt; Salvar Aula&lt;/<span style="color:#f92672">a</span>&gt;
<span style="color:#75715e">&lt;!-- Depois --&gt;</span>
&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;javascript:void(0);&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;handleSubmit(lesson)&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-action btn blue&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons right&#34;</span>&gt;send&lt;/<span style="color:#f92672">i</span>&gt; Salvar Aula&lt;/<span style="color:#f92672">a</span>&gt;</code></pre></div>
<p>Usamos a propriedade <code>@click</code> para isto, passando o método <code>handleSubmit(lesson)</code>.</p>

<p>Vamos criar este método agora:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Inputs-Create&#39;</span>,
  <span style="color:#75715e">// resto do código ocultado
</span><span style="color:#75715e"></span>  ...,
  <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">handleSubmit</span> (<span style="color:#a6e22e">lesson</span>) {
      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>

      <span style="color:#75715e">// usamos o resource do Index para salvar uma nova aula
</span><span style="color:#75715e"></span>      <span style="color:#75715e">// ela retornará uma Promise, que iremos tratar com o .then()
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$parent</span>.<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">save</span>({}, <span style="color:#a6e22e">lesson</span>).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">result</span>) =&gt; {
        <span style="color:#75715e">// em caso de sucesso, o primeiro parâmetro do .then() é usado
</span><span style="color:#75715e"></span>
        <span style="color:#75715e">// como expliquei anteriormente,
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// estou usando um plugin de jQuery para o modal.
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// preciso fechá-lo então:
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// fecha a modal
</span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">jQuery</span>(<span style="color:#e6db74">&#39;.modal&#39;</span>).<span style="color:#a6e22e">modal</span>(<span style="color:#e6db74">&#39;close&#39;</span>)

        <span style="color:#75715e">// precisamos avisar o usuário que mudanças ocorreram
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// notifica o usuário
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Aula adicionada com sucesso!&#39;</span>
        window.<span style="color:#a6e22e">Materialize</span>.<span style="color:#a6e22e">toast</span>(<span style="color:#a6e22e">message</span>)
      }, () =&gt; {
        <span style="color:#75715e">// aqui é o fallback caso a requisição tenha algum problema
</span><span style="color:#75715e"></span>
        <span style="color:#75715e">// notifica o usuário (em caso de erro)
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Erro ao adicionar aula&#39;</span>
        window.<span style="color:#a6e22e">Materialize</span>.<span style="color:#a6e22e">toast</span>(<span style="color:#a6e22e">message</span>)
      })

    }
  }
}</code></pre></div>
<p><strong>Pronto!</strong> O nosso <em>Create</em> está concluído.</p>

<p>Só que tem 1 problema: O <em>Index</em> não sabe que o seu filho, <em>Create</em>, fez algo.</p>

<p>O filho, <em>Create</em>, precisa avisar seu pai, o <em>Index</em>, que ele fez alguma coisa.</p>

<p>Faremos este aviso através dos <strong>Eventos</strong>.</p>

<p><img src="http://berb.github.io/nodejs-talk-chaosseminar/assets/images/memes/ya_callback.jpg" alt="" />
<em>Cuidado com o <a href="http://callbackhell.com/">Callback Hell</a>!</em></p>

<p>Caso uma nova aula seja adicionada com sucesso, precisamos emitir um evento indicando mudanças, que chamarei de <strong>created</strong>.</p>

<p>Para emitir este evento, o código necessário é:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$emit</span>(<span style="color:#e6db74">&#39;created&#39;</span>)</code></pre></div>
<p>Para nosso componente pai escutar este evento, podemos fazer de 2 maneiras:</p>

<h3 id="a-maneira-ideal">A maneira ideal</h3>

<p>No seu componente pai, onde chamamos o filho, adicionamos um novo atributo:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">Inputs-Create</span> <span style="color:#a6e22e">v-on:created</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;initialize&#34;</span>&gt;&lt;/<span style="color:#f92672">Inputs-Create</span>&gt;</code></pre></div>
<h3 id="a-maneira-feia">A maneira feia</h3>

<p>Caso você queira detectar dentro da execução do componente:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$on</span>(<span style="color:#e6db74">&#39;created&#39;</span>, () =&gt; {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">initialize</span>()
})</code></pre></div>
<p><strong>Pronto!</strong> <em>Created</em> de fato finalizado.</p>

<p>Agora falta <strong>Delete</strong> e <strong>Update</strong>.</p>

<h1 id="delete">Delete</h1>

<p>Vamos começar pelo <em>Delete</em> pela simplicidade.</p>

<p>Precisamos de um botão para remover os itens:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-action&#34;</span>&gt;
  &lt;<span style="color:#f92672">button</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;handleDelete(lesson)&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn-flat red-text&#34;</span>&gt;
    &lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons&#34;</span>&gt;delete&lt;/<span style="color:#f92672">i</span>&gt;
  &lt;/<span style="color:#f92672">button</span>&gt;
&lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .card-action --&gt;</span></code></pre></div>
<p>Este botão está chamando o método <code>handleDelete(lesson)</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">handleDelete</span> (<span style="color:#a6e22e">lesson</span>) {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">resource</span>.<span style="color:#66d9ef">delete</span>({<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lesson</span>.<span style="color:#a6e22e">id</span>}).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">response</span>) =&gt; {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$emit</span>(<span style="color:#e6db74">&#39;deleted&#39;</span>)
  })
}</code></pre></div>
<p>Este método está emitindo um evento <code>deleted</code>. Vamos escutá-lo quando o componente é criado?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">created</span> () {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">initialize</span>()

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$on</span>(<span style="color:#e6db74">&#39;deleted&#39;</span>, () =&gt; {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">eventDeleted</span>()
  })
}</code></pre></div>
<p>Dentro da nossa escuta, estamos acionando outro método <code>eventDeleted()</code>. Vamos criá-lo?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">eventDeleted</span> () {
  <span style="color:#75715e">// reiniciamos o componente
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">initialize</span>()

  <span style="color:#75715e">// notifica o usuário
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Aula removida!&#39;</span>
  window.<span style="color:#a6e22e">Materialize</span>.<span style="color:#a6e22e">toast</span>(<span style="color:#a6e22e">message</span>)
}</code></pre></div>
<p><strong>Pronto!</strong> <em>Delete</em> concluído, faltando apenas o <em>Update</em>.</p>

<p><img src="https://media.giphy.com/media/xT0GqtcVR0jOXzmmPK/giphy.gif" alt="" /></p>

<h1 id="update">Update</h1>

<p>O <em>Update</em> pode ser implementado em N maneiras. Faremos da maneira mais repetitiva possível, criando outro componente com um template próprio, mas talvez em uma situação da vida real seja interessante você isolar o formulário em um componente só e reaproveitá-lo dentro do <em>Create</em> e <em>Update</em>.</p>

<p>Em termos de template, é idêntico, apenas removendo o botão fixo de adicionar novos:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;inputs-update&#34;</span>&gt;

  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal2&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal&#34;</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-content&#34;</span>&gt;
      &lt;<span style="color:#f92672">h4</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;center&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons&#34;</span>&gt;edit&lt;/<span style="color:#f92672">i</span>&gt; Editar Aula&lt;/<span style="color:#f92672">h4</span>&gt;

      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-field&#34;</span>&gt;
        &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lesson.class_date&#34;</span>&gt;
        &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;date&#34;</span>&gt;Data&lt;/<span style="color:#f92672">label</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .input-field --&gt;</span>

      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-field&#34;</span>&gt;
        &lt;<span style="color:#f92672">textarea</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;observation&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;materialize-textarea&#34;</span> <span style="color:#a6e22e">v-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lesson.observation&#34;</span>&gt;&lt;/<span style="color:#f92672">textarea</span>&gt;
        &lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">for</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email&#34;</span>&gt;Observações&lt;/<span style="color:#f92672">label</span>&gt;
      &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .input-field --&gt;</span>

    &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .modal-content --&gt;</span>
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-footer&#34;</span>&gt;
      &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;javascript:void(0);&#34;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;handleSubmit(lesson)&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;modal-action btn blue&#34;</span>&gt;&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;material-icons right&#34;</span>&gt;send&lt;/<span style="color:#f92672">i</span>&gt; Salvar Aula&lt;/<span style="color:#f92672">a</span>&gt;
    &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .modal-footer --&gt;</span>
  &lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .modal --&gt;</span>

&lt;/<span style="color:#f92672">div</span>&gt; <span style="color:#75715e">&lt;!-- .inputs-update --&gt;</span></code></pre></div>
<p>No JS, duas mudanças:</p>

<ul>
<li>Adicionado <em>props</em>;</li>
<li>Alterado de <em>save</em> para <em>update</em>;</li>
<li>Alterado evento para <em>updated</em>;</li>
</ul>

<h3 id="props">props</h3>

<p>Estas são as propriedades que o seu filho receberá do pai. No caso, só temos um, o <strong>lesson</strong>.</p>

<h3 id="alteração-de-save-para-update">Alteração de <em>save</em> para <em>update</em></h3>

<p>Como estamos usando uma API RESTful como back-end, para editarmos uma entidade, precisamos executar requisições <strong>PUT</strong> ao invés de <em>POST</em>.</p>

<p>Esta alteração simples faz esta adaptação, além de, é claro, passarmos o <em>ID</em> da nossa entidade a ser editada.</p>

<h3 id="alteração-de-evento-para-updated">Alteração de evento para <em>updated</em></h3>

<p>Toda vez que salvarmos as nossas mudanças, devemos notificar ao nosso pai que mudanças foram feitas.</p>

<p>Esta notificação ocorrerá através do evento <em>updated</em>.</p>

<p>Para isto, no nosso pai, abaixo do <code>&lt;Inputs-Create&gt;</code>, teremos o <code>&lt;Inputs-Update&gt;</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">Inputs-Create</span> <span style="color:#a6e22e">v-on:created</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;initialize&#34;</span>&gt;&lt;/<span style="color:#f92672">Inputs-Create</span>&gt;
<span style="color:#75715e">&lt;!-- Observe o evento &#34;updated&#34; sendo usado e o nosso prop &#34;lesson&#34; --&gt;</span>
&lt;<span style="color:#f92672">Inputs-Update</span> <span style="color:#a6e22e">v-on:updated</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;initialize&#34;</span> <span style="color:#a6e22e">:lesson</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lesson&#34;</span>&gt;&lt;/<span style="color:#f92672">Inputs-Update</span>&gt;</code></pre></div>
<p>Abaixo o código JS do componente <em>Update</em>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Inputs-Update&#39;</span>,
  <span style="color:#a6e22e">props</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;lesson&#39;</span>],
  <span style="color:#a6e22e">created</span> () {
    window.<span style="color:#a6e22e">jQuery</span>(document).<span style="color:#a6e22e">ready</span>(() =&gt; {
      window.<span style="color:#a6e22e">jQuery</span>(<span style="color:#e6db74">&#39;.modal&#39;</span>).<span style="color:#a6e22e">modal</span>({
        <span style="color:#75715e">// isto é uma gambiarra para os labels do Materialize funcionarem
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// com dados dinâmicos
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">ready</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> () {
          window.<span style="color:#a6e22e">Materialize</span>.<span style="color:#a6e22e">updateTextFields</span>()
        }
      })
    })
  },
  <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">handleSubmit</span> (<span style="color:#a6e22e">lesson</span>) {
      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>

      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$parent</span>.<span style="color:#a6e22e">resource</span>.<span style="color:#a6e22e">update</span>({<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">lesson</span>.<span style="color:#a6e22e">id</span>}, <span style="color:#a6e22e">lesson</span>).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">result</span>) =&gt; {
        <span style="color:#75715e">// fecha a modal
</span><span style="color:#75715e"></span>        window.<span style="color:#a6e22e">jQuery</span>(<span style="color:#e6db74">&#39;.modal&#39;</span>).<span style="color:#a6e22e">modal</span>(<span style="color:#e6db74">&#39;close&#39;</span>)

        <span style="color:#75715e">// notifica o usuário
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Aula editada com sucesso!&#39;</span>
        window.<span style="color:#a6e22e">Materialize</span>.<span style="color:#a6e22e">toast</span>(<span style="color:#a6e22e">message</span>)

        <span style="color:#75715e">// emissão de evento
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$emit</span>(<span style="color:#e6db74">&#39;updated&#39;</span>)
      }, () =&gt; {
        <span style="color:#75715e">// notifica o usuário (em caso de erro)
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Erro ao editar aula&#39;</span>
        window.<span style="color:#a6e22e">Materialize</span>.<span style="color:#a6e22e">toast</span>(<span style="color:#a6e22e">message</span>)
      })
    }
  }
}</code></pre></div>
<p>Para este componente funcionar, precisamos fazer 2 adaptações no <em>Index</em>:</p>

<ul>
<li>Importar o componente <em>Update</em>;</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">InputsUpdate</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;./Update&#39;</span>
<span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#a6e22e">components</span><span style="color:#f92672">:</span> {
  <span style="color:#e6db74">&#39;Inputs-Create&#39;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">InputsCreate</span>,
  <span style="color:#e6db74">&#39;Inputs-Update&#39;</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">InputsUpdate</span>
}</code></pre></div>
<ul>
<li>Adicionar o <em>prop</em> ao <strong>data</strong>;</li>
</ul>

<p>Como estamos passando uma propriedade dinâmica chamada <em>lesson</em>, precisamos inicializá-la no nosso <strong>data</strong>.</p>

<p>Isso se faz necessário pois o <em>Vue</em> precisa que todos nossos &ldquo;models&rdquo; sejam inicializados antes de serem usados.</p>

<p>No caso, nosso data ficará assim:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">data</span> () {
  <span style="color:#66d9ef">return</span> {
    <span style="color:#a6e22e">resource</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">$resource</span>(<span style="color:#e6db74">&#39;http://localhost:3000/lessons{/id}.json&#39;</span>),
    <span style="color:#a6e22e">lessons</span><span style="color:#f92672">:</span> [],
    <span style="color:#75715e">// nova linha aqui
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">lesson</span><span style="color:#f92672">:</span> {}
  }
},</code></pre></div>
<p><strong>Pronto</strong>! Nosso CRUD funcionando 100%.</p>

<h1 id="conclusão">Conclusão</h1>

<p>No post de hoje trabalhamos com recursos muito interessantes como:</p>

<ul>
<li>O vue-resource;</li>
<li>Emissão/Escuta de Eventos;</li>
<li>Cruzamento de dados entre componentes pais e filhos.</li>
</ul>

<p>Deu para ter uma noção também do por que aplicar uma arquitetura Flux é interessante caso o seu projeto seja de médio a grande porte, para manter a sanidade de um Single Page Application. Este provavelmente será inclusive o assunto do próximo post.</p>

<p>Antes disto, irei melhorar a minha comunicação com vocês reformulando o layout do blog e criando canais de divulgação no Facebook e Twitter.</p>

<h3 id="obrigado-por-ter-lido-até-aqui">Obrigado por ter lido até aqui! :-)</h3>
</article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="/tags/vue"><span class="tag">Vue</span></a></li>
        
          <li><a href="/tags/crud"><span class="tag">Crud</span></a></li>
        
          <li><a href="/tags/flux"><span class="tag">Flux</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        Este post foi publicado <strong>326</strong> dias atrás, o conteúdo pode estar desatualizado, portanto, cuidado.
      </p>
    </footer>
    
      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "0e1dev" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
    
  </section>
  <footer class="site-footer">
  <p>© 2017 0e1dev</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script src="//cdn.bootcss.com/video.js/6.2.1/video.min.js"></script>
<script src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script src="/js/bundle.js"></script>




  </body>
</html>
